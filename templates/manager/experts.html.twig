{% extends 'base.html.twig' %}

{% block title %}Experts{% endblock %}

{% block body1 %}



    <div class="container">
        <ol class="track-progress">

            {% if app.session.get('project').id is defined %}
                {% if app.user.evaluateEntreprise.id is defined %}
                    {% if app.user.evaluateEntreprise.id == app.session.get('project').id %}
                         <li style="width: 11.1% !important;"class="done">
                        <em>1</em>
                        <span data-toggle="tooltip" title="Create Project">1</span>
                    </li>
                    <li style="width: 11.1% !important;"class="done">
                        <em>2</em>
                        <span  data-toggle="tooltip" title="Generate Evaluateures">2</span>
                    </li>
                    <li style="width: 11.1% !important;"class="done">
                        <em>3</em>
                        <span data-toggle="tooltip" title="Add criteria">3</span>
                    </li>
                    <li style="width: 11.1% !important;"class="done">
                        <em>4</em>
                        <span data-toggle="tooltip" title="Criteria validation">4</span>
                    </li>

                    <li style="width: 11.1% !important;"class="done">
                        <em>5</em>
                       <span data-toggle="tooltip" title="Add Preference">5</span>
                    </li>

                    <li style="width: 11.1% !important;"class="done">
                        <em>6</em>
                        <span   data-toggle="tooltip" title="Add Alternatives">6</span>
                    </li>

                    <li style="width: 11.1% !important;"class="done">
                        <em>7</em>
                        <span  id="activated" data-toggle="tooltip" title="Generate Experts">7</span>
                    </li>

                    <li style="width: 11.1% !important;"class="todo">
                        <em>8</em>
                        <span data-toggle="tooltip" title="Preferences">8</span>
                    </li>

                    <li style="width: 11.1% !important;" class="todo">
                        <em>9</em>
                        <span data-toggle="tooltip" title="Binary preferences">9</span>
                    </li>
                    {% else %}
                        <li style="width: 14.2% !important;" class="done">
                            <em>1</em>
                            <span data-toggle="tooltip" title="Create Project">1</span>
                        </li>
                        <li style="width: 14.2% !important;" class="done">
                            <em>2</em>
                            <span  data-toggle="tooltip" title="Generate Evaluateures">2</span>
                        </li>
                        <li style="width: 14.2% !important;" class="done">
                            <em>3</em>
                            <span  data-toggle="tooltip" title="Criteria validation">3</span>
                        </li>-
                        <li style="width: 14.2% !important;" class="done">
                            <em>4</em>
                            <span data-toggle="tooltip" title="Add Alternatives">4</span>
                        </li>
                        <li style="width: 14.2% !important;" class="done">
                            <em>5</em>
                            <span  id="activated" data-toggle="tooltip" title="Generate Experts">5</span>
                        </li>
                        <li style="width: 14.2% !important;" class="todo">
                            <em>6</em>
                            <span data-toggle="tooltip" title="Preferences">6</span>
                        </li>
                        <li style="width: 14.2% !important;" class="todo">
                            <em>7</em>
                            <span data-toggle="tooltip" title="Binary preferences">7</span>
                        </li>
                    {% endif %}
                {% else %}
                    <li style="width: 14.2% !important;" class="done">
                        <em>1</em>
                        <span data-toggle="tooltip" title="Create Project">1</span>
                    </li>
                    <li style="width: 14.2% !important;" class="done">
                        <em>2</em>
                        <span data-toggle="tooltip" title="Generate Evaluateures">2</span>
                    </li>
                    <li style="width: 14.2% !important;" class="done">
                        <em>3</em>
                        <span  data-toggle="tooltip" title="Criteria validation">3</span>
                    </li>-
                    <li style="width: 14.2% !important;" class="done">
                        <em>4</em>
                        <span data-toggle="tooltip" title="Add Alternatives">4</span>
                    </li>
                    <li style="width: 14.2% !important;" class="done">
                        <em>5</em>
                        <span  id="activated" data-toggle="tooltip" title="Generate Experts">5</span>
                    </li>
                    <li style="width: 14.2% !important;" class="todo">
                        <em>6</em>
                        <span data-toggle="tooltip" title="Preferences">6</span>
                    </li>
                    <li style="width: 14.2% !important;" class="todo">
                        <em>7</em>
                        <span data-toggle="tooltip" title="Binary preferences">7</span>
                    </li>
                {% endif %}

            {% else %}
                <li style="width: 14.2% !important;" class="done">
                    <em>1</em>
                    <span data-toggle="tooltip" title="Create Project">1</span>
                </li>
                <li style="width: 14.2% !important;" class="done">
                    <em>2</em>
                    <span data-toggle="tooltip" title="Generate Evaluateures">2</span>
                </li>
                <li style="width: 14.2% !important;" class="done">
                    <em>3</em>
                    <span  data-toggle="tooltip" title="Criteria validation">3</span>
                </li>-
                <li style="width: 14.2% !important;" class="done">
                    <em>4</em>
                    <span data-toggle="tooltip" title="Add Alternatives">4</span>
                </li>
                <li style="width: 14.2% !important;" class="done">
                    <em>5</em>
                    <span  id="activated" data-toggle="tooltip" title="Generate Experts">5</span>
                </li>
                <li style="width: 14.2% !important;" class="todo">
                    <em>6</em>
                    <span data-toggle="tooltip" title="Preferences">6</span>
                </li>
                <li style="width: 14.2% !important;" class="todo">
                    <em>7</em>
                    <span data-toggle="tooltip" title="Binary preferences">7</span>
                </li>
            {% endif %}


        </ol>


        <br>
        <br>
        <br>
        {% for flashMessage in app.session.flashbag.get('evaluateures') %}
            <div class="alert alert-success">
                {{ flashMessage }}
            </div>
        {% endfor %}
        <form method="post" action="/manager/generate_experts">
                <div class="row">
                    <div class="col">
                        <label for="username">UserName :</label>
                        <input type="text" name="username"  id="username" class="form-control" placeholder="UserName">
                    </div>
                    <div class="col">
                        <label for="email">Email :</label>
                        <input type="email" name="email"id="email" class="form-control" placeholder="Email">
                    </div>
                    <div class="col">
                        <label for="password">Password :</label>
                        <input type="password" name="password"id="password" class="form-control" placeholder="Password">
                    </div>
                    <div class="col">
                        <label for="firstname">First Name :</label>
                        <input type="text" name="firstname"id="firstname" class="form-control" placeholder="FirstName">
                    </div>
                    <div class="col">
                        <label for="lastname">Last Name:</label>
                        <input type="text" name="lastname" id="lastname" class="form-control" placeholder="LastName">
                    </div>
                    <div class="col">
                        <label for="experience">Experience :</label>
                        <input type="number" name="experience"id="experience" class="form-control" placeholder="Experience">
                    </div>
                    <div class="col">
                        <label for="domain">Domain :</label>
                        <input type="text" name="domain" id="domain" class="form-control" placeholder="Domain">
                    </div>

                    <div class="col">
                        <br>
                        <button type="submit" class="btn btn-primary">Generate</button>
                    </div>
                </div>


            </form>
        <br>

        <table class="table">
            <thead class="thead-dark">
            <tr>
                <th scope="col">Username</th>
                <th scope="col">Gmail</th>
                <th scope="col">Project</th>
                <th scope="col">Delete</th>
                <th scope="col">Edit</th>
            </tr>
            </thead>
            <tbody>
            {% for us in users %}
                {% for user in us %}
                    <tr>

                        <td>{{ user.firstname }}</td>
                        <td>{{ user.email }}</td>
                        <td>{{ user.expertEntreprise.name }}</td>
                        {#                        <td><a class="btn btn-danger btn-sm" href="/manager/evaluateur/erase/{{ user.id }}">Delete</a></td>#}
                        <td>{{ include('user/_delete_form.html.twig') }}</td>
                        <td>
                            <a href="{{ path('user_edit', {'id': user.id}) }}">Edit</a>
                        </td>

                    </tr>
                {% endfor %}
            {% endfor %}


            </tbody>
        </table>


    </div>
    <div class="container">



                <a href="{{ path('manager_prefernces') }}"  style="float: right" type="submit" class="btn btn-primary"><svg class="bi bi-arrow-right-circle" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path fill-rule="evenodd" d="M7.646 11.354a.5.5 0 0 1 0-.708L10.293 8 7.646 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0z"/>
                        <path fill-rule="evenodd" d="M4.5 8a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5z"/>
                    </svg></a>

        <a href="{{ path('alternative') }}" style="float: left" type="submit" class="btn btn-danger"><svg class="bi bi-arrow-left-circle" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                <path fill-rule="evenodd" d="M8.354 11.354a.5.5 0 0 0 0-.708L5.707 8l2.647-2.646a.5.5 0 1 0-.708-.708l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708 0z"/>
                <path fill-rule="evenodd" d="M11.5 8a.5.5 0 0 0-.5-.5H6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 .5-.5z"/>
            </svg></a>

    </div>

{% endblock %}
{% block javascripts %}
    <script>
        function etape() {
            axios.get('/manager/etape/').then(function (response) {
                if (response.data[0].value == false){
                    $('#expertLi').remove();
                }else {

                    $('#baseUl').append("   {% if is_granted('ROLE_MANAGER') %}\n" +
                        "                    <li class=\"nav-item\" id=\"expertLi\">\n" +
                        "                        <a class=\"nav-link\" href=\"{{ path('generate_experts') }}\">EXPERTS</a>\n" +
                        "                    </li>\n" +
                        "                {% endif %}");
                }
            }).catch(function (error) {
                console.log(error.message);
            })
        }
        $('#activated').tooltip('toggle')
    </script>

{% endblock %}
